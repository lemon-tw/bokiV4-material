import{r as i}from"./index-D4H_InIO.js";import{g as Po,b as ho,c as go,s as Q,a as vo}from"./memoTheme-C83d1A0S.js";import{u as S}from"./useSlot-BWf5NxIe.js";import{j as T}from"./jsx-runtime-BO8uF4Og.js";import{u as yo}from"./DefaultPropsProvider-D4sChuSN.js";import{o as X}from"./ownerDocument-DW-IO8s5.js";import{o as Y}from"./ownerWindow-HkKU3E4x.js";import{d as wo}from"./debounce-Be36O1Ab.js";import{G as bo}from"./Grow-zgzfA1CP.js";import{m as xo}from"./mergeSlotProps-DQ9n5Pzv.js";import{M as Eo}from"./Modal-DVo_Vf6F.js";import{P as Co}from"./Paper-B8zVEXaw.js";function So(t){return typeof t=="string"}const Go=i.createContext({});function To(t){return Po("MuiPopover",t)}ho("MuiPopover",["root","paper"]);function q(t,e){let s=0;return typeof e=="number"?s=e:e==="center"?s=t.height/2:e==="bottom"&&(s=t.height),s}function J(t,e){let s=0;return typeof e=="number"?s=e:e==="center"?s=t.width/2:e==="right"&&(s=t.width),s}function K(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function w(t){return typeof t=="function"?t():t}const Ro=t=>{const{classes:e}=t;return vo({root:["root"],paper:["paper"]},To,e)},Oo=Q(Eo,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ko=Q(Co,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Io=i.forwardRef(function(e,s){const R=yo({props:e,name:"MuiPopover"}),{action:Z,anchorEl:p,anchorOrigin:m={vertical:"top",horizontal:"left"},anchorPosition:O,anchorReference:P="anchorEl",children:_,className:oo,container:to,elevation:k=8,marginThreshold:a=16,open:f,PaperProps:eo={},slots:z={},slotProps:y={},transformOrigin:h={vertical:"top",horizontal:"left"},TransitionComponent:M,transitionDuration:b="auto",TransitionProps:L={},disableScrollLock:x=!1,...ro}=R,E=i.useRef(),g={...R,anchorOrigin:m,anchorReference:P,elevation:k,marginThreshold:a,transformOrigin:h,TransitionComponent:M,transitionDuration:b,TransitionProps:L},W=Ro(g),j=i.useCallback(()=>{if(P==="anchorPosition")return O;const o=w(p),r=(o&&o.nodeType===1?o:X(E.current).body).getBoundingClientRect();return{top:r.top+q(r,m.vertical),left:r.left+J(r,m.horizontal)}},[p,m.horizontal,m.vertical,O,P]),D=i.useCallback(o=>({vertical:q(o,h.vertical),horizontal:J(o,h.horizontal)}),[h.horizontal,h.vertical]),H=i.useCallback(o=>{const n={width:o.offsetWidth,height:o.offsetHeight},r=D(n);if(P==="none")return{top:null,left:null,transformOrigin:K(r)};const v=j();let u=v.top-r.vertical,d=v.left-r.horizontal;const $=u+n.height,G=d+n.width,I=Y(w(p)),B=I.innerHeight-a,V=I.innerWidth-a;if(a!==null&&u<a){const l=u-a;u-=l,r.vertical+=l}else if(a!==null&&$>B){const l=$-B;u-=l,r.vertical+=l}if(a!==null&&d<a){const l=d-a;d-=l,r.horizontal+=l}else if(G>V){const l=G-V;d-=l,r.horizontal+=l}return{top:`${Math.round(u)}px`,left:`${Math.round(d)}px`,transformOrigin:K(r)}},[p,P,j,D,a]),[no,A]=i.useState(f),c=i.useCallback(()=>{const o=E.current;if(!o)return;const n=H(o);n.top!==null&&o.style.setProperty("top",n.top),n.left!==null&&(o.style.left=n.left),o.style.transformOrigin=n.transformOrigin,A(!0)},[H]);i.useEffect(()=>(x&&window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)),[p,x,c]);const so=()=>{c()},io=()=>{A(!1)};i.useEffect(()=>{f&&c()}),i.useImperativeHandle(Z,()=>f?{updatePosition:()=>{c()}}:null,[f,c]),i.useEffect(()=>{if(!f)return;const o=wo(()=>{c()}),n=Y(w(p));return n.addEventListener("resize",o),()=>{o.clear(),n.removeEventListener("resize",o)}},[p,f,c]);let F=b;const C={slots:{transition:M,...z},slotProps:{transition:L,paper:eo,...y}},[U,ao]=S("transition",{elementType:bo,externalForwardedProps:C,ownerState:g,getSlotProps:o=>({...o,onEntering:(n,r)=>{var v;(v=o.onEntering)==null||v.call(o,n,r),so()},onExited:n=>{var r;(r=o.onExited)==null||r.call(o,n),io()}}),additionalProps:{appear:!0,in:f}});b==="auto"&&!U.muiSupportAuto&&(F=void 0);const lo=to||(p?X(w(p)).body:void 0),[N,{slots:po,slotProps:co,...fo}]=S("root",{ref:s,elementType:Oo,externalForwardedProps:{...C,...ro},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:z.backdrop},slotProps:{backdrop:xo(typeof y.backdrop=="function"?y.backdrop(g):y.backdrop,{invisible:!0})},container:lo,open:f},ownerState:g,className:go(W.root,oo)}),[uo,mo]=S("paper",{ref:E,className:W.paper,elementType:ko,externalForwardedProps:C,shouldForwardComponentProp:!0,additionalProps:{elevation:k,style:no?void 0:{opacity:0}},ownerState:g});return T.jsx(N,{...fo,...!So(N)&&{slots:po,slotProps:co,disableScrollLock:x},children:T.jsx(U,{...ao,timeout:F,children:T.jsx(uo,{...mo,children:_})})})});export{Go as L,Io as P,ko as a,So as i};
