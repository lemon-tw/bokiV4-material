import{r as c}from"./index-D4H_InIO.js";import{j as v}from"./jsx-runtime-BO8uF4Og.js";import{u as j}from"./useEnhancedEffect-H9AsPDTf.js";import{g as T}from"./getScrollbarSize-CaCM53D3.js";import{o as H}from"./ownerWindow-HkKU3E4x.js";import{u as U}from"./useForkRef-Tlf6rvD7.js";import{g as A,b as N,s as z,c as O,a as W}from"./memoTheme-DQLz_w2O.js";import{L as $}from"./ListContext-I3Sbm7li.js";import{u as B}from"./DefaultPropsProvider-CwqFt9v8.js";import{o as V}from"./ownerDocument-DW-IO8s5.js";function q(t){return A("MuiList",t)}N("MuiList",["root","padding","dense","subheader"]);const G=t=>{const{classes:e,disablePadding:s,dense:m,subheader:u}=t;return W({root:["root",!s&&"padding",m&&"dense",u&&"subheader"]},q,e)},J=z("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,!s.disablePadding&&e.padding,s.dense&&e.dense,s.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),Q=c.forwardRef(function(e,s){const m=B({props:e,name:"MuiList"}),{children:u,className:h,component:f="ul",dense:n=!1,disablePadding:p=!1,subheader:g,...y}=m,x=c.useMemo(()=>({dense:n}),[n]),C={...m,component:f,dense:n,disablePadding:p},d=G(C);return v.jsx($.Provider,{value:x,children:v.jsxs(J,{as:f,className:O(d.root,h),ref:s,ownerState:C,...y,children:[g,u]})})});function L(t,e,s){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:s?null:t.firstChild}function E(t,e,s){return t===e?s?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:s?null:t.lastChild}function K(t,e){if(e===void 0)return!0;let s=t.innerText;return s===void 0&&(s=t.textContent),s=s.trim().toLowerCase(),s.length===0?!1:e.repeating?s[0]===e.keys[0]:s.startsWith(e.keys.join(""))}function w(t,e,s,m,u,h){let f=!1,n=u(t,e,e?s:!1);for(;n;){if(n===t.firstChild){if(f)return!1;f=!0}const p=m?!1:n.disabled||n.getAttribute("aria-disabled")==="true";if(!n.hasAttribute("tabindex")||!K(n,h)||p)n=u(t,n,s);else return n.focus(),!0}return!1}const oe=c.forwardRef(function(e,s){const{actions:m,autoFocus:u=!1,autoFocusItem:h=!1,children:f,className:n,disabledItemsFocusable:p=!1,disableListWrap:g=!1,onKeyDown:y,variant:x="selectedMenu",...C}=e,d=c.useRef(null),R=c.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});j(()=>{u&&d.current.focus()},[u]),c.useImperativeHandle(m,()=>({adjustStyleForScrollbar:(r,{direction:i})=>{const l=!d.current.style.width;if(r.clientHeight<d.current.clientHeight&&l){const M=`${T(H(r))}px`;d.current.style[i==="rtl"?"paddingLeft":"paddingRight"]=M,d.current.style.width=`calc(100% + ${M})`}return d.current}}),[]);const D=r=>{const i=d.current,l=r.key;if(r.ctrlKey||r.metaKey||r.altKey){y&&y(r);return}const b=V(i).activeElement;if(l==="ArrowDown")r.preventDefault(),w(i,b,g,p,L);else if(l==="ArrowUp")r.preventDefault(),w(i,b,g,p,E);else if(l==="Home")r.preventDefault(),w(i,null,g,p,L);else if(l==="End")r.preventDefault(),w(i,null,g,p,E);else if(l.length===1){const o=R.current,S=l.toLowerCase(),k=performance.now();o.keys.length>0&&(k-o.lastTime>500?(o.keys=[],o.repeating=!0,o.previousKeyMatched=!0):o.repeating&&S!==o.keys[0]&&(o.repeating=!1)),o.lastTime=k,o.keys.push(S);const F=b&&!o.repeating&&K(b,o);o.previousKeyMatched&&(F||w(i,b,!1,p,L,o))?r.preventDefault():o.previousKeyMatched=!1}y&&y(r)},I=U(d,s);let a=-1;c.Children.forEach(f,(r,i)=>{if(!c.isValidElement(r)){a===i&&(a+=1,a>=f.length&&(a=-1));return}r.props.disabled||(x==="selectedMenu"&&r.props.selected||a===-1)&&(a=i),a===i&&(r.props.disabled||r.props.muiSkipListHighlight||r.type.muiSkipListHighlight)&&(a+=1,a>=f.length&&(a=-1))});const P=c.Children.map(f,(r,i)=>{if(i===a){const l={};return h&&(l.autoFocus=!0),r.props.tabIndex===void 0&&x==="selectedMenu"&&(l.tabIndex=0),c.cloneElement(r,l)}return r});return v.jsx(Q,{role:"menu",ref:I,className:n,onKeyDown:D,tabIndex:u?0:-1,...C,children:P})});export{Q as L,oe as M};
